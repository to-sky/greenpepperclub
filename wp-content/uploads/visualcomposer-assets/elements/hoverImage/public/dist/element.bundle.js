(window.vcvWebpackJsonp4x=window.vcvWebpackJsonp4x||[]).push([[0],{"./hoverImage/index.js":function(e,t,a){"use strict";a.r(t);var i=a("./node_modules/vc-cake/index.js"),n=a.n(i),o=a("./node_modules/@babel/runtime/helpers/extends.js"),r=a.n(o),s=a("./node_modules/@babel/runtime/helpers/typeof.js"),l=a.n(s),c=a("./node_modules/@babel/runtime/helpers/classCallCheck.js"),m=a.n(c),g=a("./node_modules/@babel/runtime/helpers/createClass.js"),p=a.n(g),v=a("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),h=a.n(v),u=a("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=a.n(u),b=a("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),f=a.n(b),w=a("./node_modules/@babel/runtime/helpers/inherits.js"),y=a.n(w),I=a("./node_modules/@babel/runtime/helpers/defineProperty.js"),k=a.n(I),x=a("./node_modules/react/index.js"),E=a.n(x),S=Object(i.getService)("api"),z=Object(i.getService)("renderProcessor"),j=Object(i.getService)("utils"),C=j.getBlockRegexp,O=j.parseDynamicBlock,_=C(),H=function(e){function t(e){var a;return m()(this,t),a=h()(this,d()(t).call(this,e)),k()(f()(a),"promise",null),a.state={imgElements:null},a.setImage=a.setImage.bind(f()(a)),a.setImageState=a.setImageState.bind(f()(a)),a.setError=a.setError.bind(f()(a)),a}return y()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e=this;this.promise=new window.Promise(function(t,a){e.resolve=t,e.setImage(e.props)}),z.add(this.promise)}},{key:"componentWillUnmount",value:function(){var e=this;Object.keys(t.images).forEach(function(a){t.images[a]&&t.images[a].removeEventListener("load",e.setImageState),t.images[a]&&t.images[a].removeEventListener("error",e.setError)})}},{key:"componentDidUpdate",value:function(e){e.atts.image!==this.props.atts.image?this.setImage(this.props):e.atts.imageHover!==this.props.atts.imageHover?this.setImage(this.props):e.atts.size!==this.props.atts.size?this.resetImageSizeState():e.atts.shape!==this.props.atts.shape&&this.resetImageSizeState()}},{key:"parseSize",value:function(e,t,a,i){var n=!0;"string"==typeof e?e=e.replace(/\s/g,"").replace(/px/g,"").toLowerCase().split("x"):"object"===l()(e)&&(n=e.crop,e=[e.width,e.height]),a=parseInt(a),i=parseInt(i);var o=parseInt(e[0])<a,r=parseInt(e[1])<i;if(n)e[0]=parseInt(e[0])<a?parseInt(e[0]):a,e[1]=parseInt(e[1])<i?parseInt(e[1]):i;else{if(e[0]=o?parseInt(e[0]):a,e[1]=r?parseInt(e[1]):i,o&&!r){var s=e[0]/a;e[1]=parseInt(i*s)}if(r&&!o){var c=e[1]/i;e[0]=parseInt(a*c)}if(r&&o)if(i<a){var m=e[0]/a;e[1]=parseInt(i*m)}else{var g=e[1]/i;e[0]=parseInt(a*g)}}if(t){var p=e[0]>=e[1]?e[1]:e[0];e={width:p,height:p}}else e={width:e[0],height:e[1]};return e}},{key:"checkRelatedSize",value:function(e){var t=null;return window.vcvImageSizes&&window.vcvImageSizes[e]&&(t=window.vcvImageSizes[e]),t}},{key:"getSizes",value:function(e,t){var a=e.size,i=e.shape,n="";return{width:(n=(a=a.replace(/\s/g,"").replace(/px/g,"").toLowerCase()).match(/\d+(x)\d+/)?this.parseSize(a,"round"===i,t.width,t.height):(n=this.checkRelatedSize(a))?this.parseSize(n,"round"===i,t.width,t.height):this.parseSize({width:t.width,height:t.height},"round"===i,t.width,t.height)).width,height:n.height}}},{key:"setImage",value:function(e){var a=this,i=e.atts,n=i.image,o=i.imageHover,r={};[n,o].forEach(function(e,i){var n=a.getImageUrl(e),o="image-".concat(i);t.images[o]&&t.images[o].removeEventListener("load",a.setImageState),t.images[o]&&t.images[o].removeEventListener("error",a.setError),t.images[o]=new window.Image,t.images[o].addEventListener("load",a.setImageState.bind(a,i)),t.images[o].addEventListener("error",a.setError),n?t.images[o].src=n:a.setError(),n||(r[o]={imgIndex:null,imgElement:null,parsedWidth:null,parsedHeight:null,naturalWidth:null,naturalHeight:null})}),this.setState({imgElements:r})}},{key:"setImageState",value:function(e,t){var a=this,i=this.state.imgElements,n=t.currentTarget,o=this.getSizes(this.props.atts,n);i["image-".concat(e)]={imgIndex:e,imgElement:n,parsedWidth:o.width,parsedHeight:o.height,naturalWidth:n.width,naturalHeight:n.height},this.setState({imgElements:i},function(){a.resolve&&a.resolve(!0)})}},{key:"resetImageSizeState",value:function(){for(var e=["image-0","image-1"],t=this.state.imgElements,a=0;a<e.length;a++){var i=this.getSizes(this.props.atts,t[e[a]].imgElement);t[e[a]].parsedWidth=i.width,t[e[a]].parsedHeight=i.height}this.setState({imgElements:t})}},{key:"setError",value:function(){this.resolve&&this.resolve(!1)}},{key:"getImageShortcode",value:function(e,t){var a=e.props,i=e.classes,n=e.isDefaultImage,o=e.src,r=e.isDynamicImage,s=e.dynamicBlock,l=e.naturalSizes,c=this.state.imgElements&&this.state.imgElements[t],m=c&&c.parsedWidth?c.parsedWidth:0,g=c&&c.parsedHeight?c.parsedHeight:0,p='[vcvSingleImage class="'.concat(i,'" data-width="').concat(m,'" data-height="').concat(g,'" src="').concat(o,'" data-img-src="').concat(a["data-img-src"],'" alt="').concat(a.alt,'" title="').concat(a.title,'"');if(n&&(p+=' data-default-image="true"'),r){var v=O(s);v&&(p+=' data-dynamic="'.concat(v.blockAtts.value,'"')),l&&(p+=' data-dynamic-natural-size="true"')}return p+="]"}},{key:"render",value:function(){var e=this,t=this.props,a=t.id,i=t.atts,n=t.editor,o=i.image,s=i.imageHover,l=i.size,c=i.alignment,m=i.shape,g=i.clickableOptions,p=i.showCaption,v=i.metaCustomId,h=i.customClass,u="vce-hover-image-container vce",d={},b={},f=[o,s],w=[this.props.rawAtts.image,this.props.rawAtts.imageHover];c&&(u+=" vce-hover-image--align-".concat(c)),"string"==typeof h&&h&&(u+=" ".concat(h)),v&&(b.id=v);var y={};if(this.state.imgElements&&this.state.imgElements["image-0"]){var I=this.state.imgElements["image-0"].parsedHeight,k=this.state.imgElements["image-0"].parsedWidth;y.paddingBottom="".concat(I/k*100,"%"),y.width=k}var x=!1,S=f.map(function(t,i){var n="vce-hover-image-inner",o="span",s={},c={},v="image-".concat(i),h=e.getImageUrl(t);if(c["data-img-src"]=h,c.alt=t&&t.alt?t.alt:"",c.title=t&&t.title?t.title:"",n+=i?" vce-hover-image-inner-hover":" vce-hover-image-inner-front","url"===g&&t&&t.link&&t.link.url){o="a";var u=t.link;s={href:u.url,title:u.title,target:u.targetBlank?"_blank":void 0,rel:u.relNofollow?"nofollow":void 0}}else"imageNewTab"===g?(o="a",s={href:h,target:"_blank"}):"lightbox"===g?(o="a",s={href:h,"data-lightbox":"lightbox-".concat(a)}):"zoom"===g?n+=" vce-hover-image-zoom-container":"photoswipe"===g&&(o="a",s={href:h,"data-photoswipe-image":a,"data-photoswipe-index":0},b["data-photoswipe-item"]="photoswipe-".concat(a),p&&(s["data-photoswipe-caption"]=t.caption),d["data-photoswipe-gallery"]=a);m&&(n+=" vce-hover-image--border-".concat(m));var f=t&&t.urls&&t.urls.length?t.urls[0]:t;f&&f.filter&&"normal"!==f.filter&&(n+=" vce-image-filter--".concat(f.filter)),s.key="customProps:".concat(a,"-").concat(h,"-").concat(l);var I=w[i]&&w[i].full,k=Array.isArray("string"==typeof I&&I.match(_));if(0===i&&e.state.imgElements&&e.state.imgElements["image-0"]){var S=e.state.imgElements["image-0"],z=S.naturalWidth,j=S.naturalHeight;k&&(1===z&&1===j||(!l||"full"===l)&&"round"!==m)&&(s["data-vce-delete-attr"]="style",x=!0)}var C={props:c,classes:"vce-hover-image-image",isDefaultImage:!(t&&t.id),src:h,isDynamicImage:k,dynamicBlock:w[i].full,naturalSizes:x},O=E.a.createElement("img",r()({className:"".concat("vce-hover-image-image"," vcvhelper"),src:h},c,{"data-vcvs-html":e.getImageShortcode(C,v)}));"full"!==l||"round"===m||k||(O=E.a.createElement("img",r()({className:"vce-hover-image-image",src:h},c)));var H={};return 0===i&&(H={style:{paddingBottom:y.paddingBottom}},k&&(H["data-vce-delete-attr"]="style")),E.a.createElement(o,r()({className:n},s,{ref:"imageContainer",key:"vce-hover-image-".concat(i,"-").concat(a)},H),O)});x&&(b["data-vce-delete-attr"]="style");var z=this.applyDO("all");return E.a.createElement("div",r()({className:u,id:"el-"+a},n,d,z),E.a.createElement("div",r()({className:"vce-hover-image-wrapper"},b,{style:{width:y.width}}),S))}}]),t}(S.elementComponent);k()(H,"images",{}),(0,n.a.getService("cook").add)(a("./hoverImage/settings.json"),function(e){e.add(H)},{css:a("./node_modules/raw-loader/index.js!./hoverImage/styles.css"),editorCss:a("./node_modules/raw-loader/index.js!./hoverImage/editor.css")})},"./hoverImage/settings.json":function(e){e.exports={tag:{access:"protected",type:"string",value:"hoverImage"},relatedTo:{type:"group",access:"protected",value:["General"]},image:{type:"attachimage",access:"public",value:"hover-image-01.jpg",options:{label:"Image",multiple:!1,dynamicField:!0,defaultValue:"hover-image-01.jpg",onChange:{rules:{clickableOptions:{rule:"value",options:{value:"url"}}},actions:[{action:"attachImageUrls"}]},url:!1,imageFilter:!0}},imageHover:{type:"attachimage",access:"public",value:"hover-image-02.jpg",options:{label:"Image on hover",multiple:!1,dynamicField:!0,defaultValue:"hover-image-02.jpg",onChange:{rules:{clickableOptions:{rule:"value",options:{value:"url"}}},actions:[{action:"attachImageUrls"}]},url:!1,imageFilter:!0}},shape:{type:"buttonGroup",access:"public",value:"square",options:{label:"Shape",values:[{label:"Square",value:"square",icon:"vcv-ui-icon-attribute-shape-square"},{label:"Rounded",value:"rounded",icon:"vcv-ui-icon-attribute-shape-rounded"},{label:"Round",value:"round",icon:"vcv-ui-icon-attribute-shape-round"}]}},metaOrder:{type:"number",access:"protected",value:4},size:{type:"string",access:"public",value:"large",options:{label:"Size",description:"Enter image size (Example: 'thumbnail', 'medium', 'large', 'full' or other sizes defined by theme). Alternatively enter size in pixels (Example: 200x100 (Width x Height))."}},clickableOptions:{type:"dropdown",access:"public",value:"",options:{label:"OnClick action",values:[{label:"None",value:""},{label:"Lightbox",value:"lightbox"},{label:"PhotoSwipe",value:"photoswipe"},{label:"Zoom",value:"zoom"},{label:"Open Image in New Tab",value:"imageNewTab"},{label:"Link selector",value:"url"}]}},showCaption:{type:"toggle",access:"public",value:!1,options:{label:"Show image caption in gallery view",onChange:{rules:{clickableOptions:{rule:"value",options:{value:"photoswipe"}}},actions:[{action:"toggleVisibility"}]}}},alignment:{type:"buttonGroup",access:"public",value:"left",options:{label:"Alignment",values:[{label:"Left",value:"left",icon:"vcv-ui-icon-attribute-alignment-left"},{label:"Center",value:"center",icon:"vcv-ui-icon-attribute-alignment-center"},{label:"Right",value:"right",icon:"vcv-ui-icon-attribute-alignment-right"}]}},metaCustomId:{type:"customId",access:"public",value:"",options:{label:"Element ID",description:"Apply unique ID to element to link directly to it by using #your_id (for element ID use lowercase input only)."}},customClass:{type:"string",access:"public",value:"",options:{label:"Extra class name",description:"Add an extra class name to the element and refer to it from Custom CSS option."}},designOptions:{type:"designOptions",access:"public",value:{},options:{label:"Design Options"}},editFormTab1:{type:"group",access:"protected",value:["clickableOptions","showCaption","image","imageHover","shape","size","alignment","metaCustomId","customClass"],options:{label:"General"}},metaEditFormTabs:{type:"group",access:"protected",value:["editFormTab1","designOptions"]},metaPublicJs:{access:"protected",type:"string",value:{libraries:[{rules:{clickableOptions:{rule:"value",options:{value:"zoom"}}},libPaths:["public/dist/hoverImage.min.js"]}]}},sharedAssetsLibrary:{access:"protected",type:"string",value:{libraries:[{rules:{clickableOptions:{rule:"value",options:{value:"lightbox"}}},libsNames:["lightbox"]},{rules:{clickableOptions:{rule:"value",options:{value:"zoom"}}},libsNames:["zoom"]},{rules:{clickableOptions:{rule:"value",options:{value:"photoswipe"}}},libsNames:["photoswipe"]}]}}}},"./node_modules/raw-loader/index.js!./hoverImage/editor.css":function(e,t){e.exports=".vce-hover-image-container {\n  min-height: 1em;\n}\n"},"./node_modules/raw-loader/index.js!./hoverImage/styles.css":function(e,t){e.exports='a.vce-hover-image-inner {\n  color: transparent;\n  border-bottom: 0;\n  text-decoration: none;\n  box-shadow: none;\n}\n\na.vce-hover-image-inner:hover,\na.vce-hover-image-inner:focus {\n  text-decoration: none;\n  box-shadow: none;\n  border-bottom: 0;\n}\n\n.vce-hover-image-inner {\n  display: inline-block;\n  width: 100%;\n  vertical-align: top;\n  position: relative;\n}\n\n.vce-hover-image-wrapper {\n  display: inline-block;\n  max-width: 100%;\n  overflow: hidden;\n  vertical-align: top;\n  position: relative;\n}\n\n.vce-hover-image-inner-hover {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.vce-hover-image-container .vce-hover-image-wrapper .vce-hover-image-inner {\n  display: inline-block;\n}\n\n.vce-hover-image-wrapper:hover .vce-hover-image-inner-front {\n  opacity: 0;\n}\n\n.vce-hover-image-wrapper:hover .vce-hover-image-inner-hover {\n  opacity: 1;\n}\n\n.vce-hover-image-inner-hover {\n  opacity: 0;\n}\n\n.vce-hover-image-wrapper img {\n  vertical-align: top;\n  max-width: 100%;\n}\n\n.vce-hover-image--border-rounded {\n  border-radius: 5px;\n  overflow: hidden;\n}\n\n.vce-hover-image--border-round {\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.vce-hover-image--align-center {\n  text-align: center;\n}\n\n.vce-hover-image--align-right {\n  text-align: right;\n}\n\n.vce-hover-image--align-left {\n  text-align: left;\n}\n\n.vce-hover-image-wrapper figure {\n  margin: 0;\n}\n\n.vce-hover-image-wrapper figcaption {\n  font-style: italic;\n  margin-top: 10px;\n}\n\n.vce-hover-image-inner-front .vce-hover-image-image:not([data-dynamic-natural-size="true"]),\n.vce-hover-image-inner-hover .vce-hover-image-image {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.vce-hover-image-container .vce-hover-image-inner .vce-hover-image-image {\n  box-shadow: none;\n}\n'}},[["./hoverImage/index.js"]]]);