!function(e,n){function i(e){return{element:null,images:[],currentIndex:0,activeImages:[],direction:"",oldMousePosition:0,setup:function(e){return this.handleMouseMove=this.handleMouseMove.bind(this),this.handleElementRemove=this.handleElementRemove.bind(this),(e.getVceParallaxBackgroundAnimation=this).element=e,this.elementRoot=n.getElementById("el-"+e.dataset.vceAssetBackgroundAnimationElement),this.prepareElement(),this.create(),e.getVceParallaxBackgroundAnimation},create:function(){this.addMouseMoveEvent(),this.observer=new MutationObserver(this.handleElementRemove),this.observer.observe(this.element.parentElement,{childList:!0})},getMousePosition:function(e){var t="";if(100<(e.pageX<this.oldMousePosition?(t="left",this.oldMousePosition-e.pageX):(t="right",e.pageX-this.oldMousePosition)))return this.oldMousePosition=e.pageX,t},handleElementRemove:function(){n.body.contains(this.element)||this.destroy()},addMouseMoveEvent:function(){this.elementRoot.addEventListener("mousemove",this.handleMouseMove)},removeMouseMoveEvent:function(){this.elementRoot.removeEventListener("mousemove",this.handleMouseMove)},prepareElement:function(){var e=this.element.querySelector(".vce-asset-background-animation"),t=e.getAttribute("data-vcvs-html");t&&(e.innerHTML=t),this.images=[].slice.call(e.querySelectorAll(".vce-asset-background-simple > div")),this.images.forEach(function(e){e.classList.add("vce-asset-background-animation-item"),e.style.width="100%",e.parentNode.removeChild(e)}),this.setImage()},handleMouseMove:function(i,s,a){var o;return function(){var e=this,t=arguments,n=a&&!o;clearTimeout(o),o=setTimeout(function(){o=null,a||i.apply(e,t)},s),n&&i.apply(e,t)}}(function(e){this.direction=this.getMousePosition(e),void 0!==this.direction&&null!==this.direction&&this.nextImage()},5),setImage:function(){var e=this.images[this.currentIndex];e?(e.classList.add("vce-asset-background-animation-item--"+this.currentIndex),e.style.left="0",e.style.transform="",this.element.querySelector(".vce-asset-background-simple").appendChild(e),this.animate(e),this.activeImages.unshift(this.currentIndex),this.currentIndex<this.images.length-1?this.currentIndex++:this.currentIndex=0):this.currentIndex=0},animate:function(e){var t=this.element.querySelector(".vce-asset-background-animation-item--"+this.currentIndex);"left"===this.direction?(e.style.left="-100px",anime({targets:t,translateX:100,easing:"easeOutExpo",duration:2500})):(e.style.left="100px",anime({targets:t,translateX:-100,easing:"easeOutExpo",duration:2500}))},nextImage:function(){if(this.activeImages.length<2)this.setImage();else{this.activeImages.pop(),this.setImage(),0===this.activeImages[1]?this.images.length-1:this.activeImages[1]-1;var e=this.element.querySelector(".vce-asset-background-animation-item--"+this.currentIndex);e&&e.parentNode.removeChild(e)}},destroy:function(){this.removeMouseMoveEvent(),this.observer.disconnect(),this.observer=null,delete this.element.getVceParallaxBackgroundAnimation,this.element=null}}.setup(e)}var t=function(e){var t=n.querySelectorAll(e);return(t=[].slice.call(t)).forEach(function(e){e.getVceParallaxBackgroundAnimation?e.getVceParallaxBackgroundAnimation.prepareElement():i(e)}),1===t.length?t.pop():t};e.vceAssetsBackgroundAnimation=t}(window,document),window.vcv.on("ready",function(e,t){if("merge"!==e){var n="[data-vce-asset-background-animation]";n=t?'[data-vcv-element="'+t+'"] '+n:n,window.vceAssetsBackgroundAnimation(n)}});
